<!DOCTYPE html>
<html>
<head>
  <title>Redirecting...</title>
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
      // 获取当前完整的 URL 路径
      var fullPath = window.location.pathname;

      // 定义基本路径
      var basePathMap = {
        "/activity/": "/news/",  // 将旧的 activity 路径重定向到 news
        "/news/": "/news/",      // 确保 /news 重定向到 /news/
        "/map/": "/map/"         // 确保 /map 重定向到 /map/
      };

      // 处理已定义的基本路径
      var redirected = false;
      if (fullPath.startsWith("/activity/")) {
        var subPath = fullPath.split("/activity/")[1]; // 获取旧路径后的部分
        window.location.href = "/news/" + subPath; // 重定向到新的 news 路径加上子路径
        redirected = true;
      }
      // 处理 /news/ 和 /map/ 的直接重定向
      else {
        Object.keys(basePathMap).forEach(function(basePath) {
          if (fullPath.startsWith(basePath)) {
            window.location.href = basePathMap[basePath] + fullPath.split(basePath)[1];
            redirected = true;
          }
        });
      }
      // 特别处理没有尾随斜杠的 /activity 和 /news
      if (fullPath === "/activity" || fullPath === "/news") {
        window.location.href = fullPath + "/";
        redirected = true;
      }

      // 处理所有其他未知的 404，重定向到根目录
      if (!redirected) {
        window.location.href = "/";
      }
    });
  </script>
</head>
<body>
  <p>If you are not redirected, <a href="/">click here to return to the homepage</a>.</p>
</body>
</html>
