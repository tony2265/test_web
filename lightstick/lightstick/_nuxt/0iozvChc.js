import{_ as m,r as u,K as v,o as p,L as _,t as c,x as f,z as g,A as k,T as w,v as l,M as x,N as y,O as I,P as b}from"./DagF_4iP.js";const M=window.setInterval,D={class:"shake-device-container"},N=200,V={__name:"index",setup(A){const o=u({}),r=v({}),i=u(null),h=a=>{if(r[a])return r[a];const n=Math.floor(Math.random()*80)+10,s=Math.floor(Math.random()*20)+8,e={position:"absolute",left:`${n}%`,bottom:`${s}%`,transform:"translate(-50%, -50%)"};return r[a]=e,e};async function d(){try{const n=await(await fetch("https://interactify.corn323.com/tilt-data")).json(),s={},e=new Set;if(Array.isArray(n))for(const t of n)t.deviceId&&(t.tiltValue===-1||t.tiltValue===1)&&(s[t.deviceId]=t.tiltValue,e.add(t.deviceId));else console.warn("API 回傳資料格式非預期，預期為陣列:",n);for(const t in o.value)e.has(t)||(delete o.value[t],delete r[t]);Object.assign(o.value,s)}catch(a){console.error("Error fetching shake data:",a)}}return p(()=>{d(),i.value=M(d,N)}),_(()=>{i.value&&clearInterval(i.value)}),(a,n)=>(l(),c("div",null,[f("div",D,[g(w,{name:"fade-shake",tag:"div"},{default:k(()=>[(l(!0),c(x,null,y(o.value,(s,e)=>(l(),c("div",{key:e,class:"device-shake-item",style:I(h(e))},[f("img",{src:"https://i.postimg.cc/bZVHKbBM/light-Stick.png",class:b(["light-stick",{"shake-left":Number(s)<0,"shake-right":Number(s)>0}]),alt:"Light Stick"},null,2)],4))),128))]),_:1})])]))}},E=m(V,[["__scopeId","data-v-f92a5a09"]]);export{E as default};
