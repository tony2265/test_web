import{d as T,j as C,r,o as K,g as a,t as g,v as f,z as t,E as S,F as N,A as l,x as o,B as y,y as P,J as M,K as $,_ as D,L as F}from"./kOEfD73y.js";const J={key:0,class:"gate-wrap"},L={class:"d-flex align-center justify-center"},Y={key:1,class:"gate-wrap"},q={class:"d-flex align-center justify-space-between mb-4"},H={class:"d-flex flex-wrap gap-2 mt-2"},Q={class:"d-flex align-center justify-space-between mt-4"},W={key:2},X={class:"pinbar"},Z=T({__name:"PinGate",props:{pin:{},storageKey:{}},setup(w){const n=w,k=C(()=>String(n.pin??"0919")),v=C(()=>n.storageKey??"cashier_pin_ok"),s=r(!1),i=r(!1),c=r(""),p=r(!1),m=r(!0),u=r(""),x=r({show:!1,text:""});function b(d){x.value.text=d,x.value.show=!0}function B(){c.value="",u.value=""}function V(){u.value="";const d=String(c.value??"").trim();if(!d){u.value="請輸入 PIN 碼";return}if(d!==k.value){u.value="PIN 碼錯誤",b("PIN 碼錯誤");return}if(i.value=!0,b("已解鎖"),m.value)try{localStorage.setItem(v.value,"1")}catch{}}function E(){i.value=!1,c.value="",u.value="",b("已鎖定");try{localStorage.removeItem(v.value)}catch{}}return K(()=>{try{localStorage.getItem(v.value)==="1"&&(i.value=!0)}catch{}s.value=!0}),(d,e)=>{const j=a("v-progress-circular"),I=a("v-container"),O=a("v-chip"),z=a("v-alert"),A=a("v-text-field"),h=a("v-btn"),R=a("v-checkbox"),U=a("v-card"),G=a("v-snackbar");return f(),g("div",null,[s.value?i.value?(f(),g("div",W,[o("div",X,[t(h,{variant:"tonal",color:"red",size:"small","prepend-icon":"mdi-lock",onClick:E},{default:l(()=>e[9]||(e[9]=[y(" 登出 ")])),_:1})]),$(d.$slots,"default",{},void 0)])):(f(),g("div",Y,[t(I,{class:"py-10",style:{"max-width":"520px"}},{default:l(()=>[t(U,{rounded:"lg",class:"pa-4",elevation:"0"},{default:l(()=>[o("div",q,[e[6]||(e[6]=o("div",null,[o("div",{class:"text-h6 font-weight-bold"},"安全性驗證"),o("div",{class:"text-caption text-medium-emphasis"},"請輸入 PIN 碼方可查閱")],-1)),t(O,{size:"small",variant:"tonal"},{default:l(()=>e[5]||(e[5]=[y("僅供內部使用")])),_:1})]),u.value?(f(),S(z,{key:0,type:"error",variant:"tonal",class:"mb-3"},{default:l(()=>[y(P(u.value),1)]),_:1})):N("",!0),t(A,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=_=>c.value=_),type:p.value?"text":"password",label:"PIN 碼",inputmode:"numeric",autocomplete:"one-time-code",maxlength:"10",variant:"outlined",density:"comfortable",onKeyup:M(V,["enter"]),"append-inner-icon":p.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[1]||(e[1]=_=>p.value=!p.value)},null,8,["modelValue","type","append-inner-icon"]),o("div",H,[t(h,{color:"primary",variant:"flat",class:"flex-grow-1",onClick:V},{default:l(()=>e[7]||(e[7]=[y(" 進入 ")])),_:1}),t(h,{variant:"tonal",onClick:B},{default:l(()=>e[8]||(e[8]=[y(" 清除 ")])),_:1})]),o("div",Q,[t(R,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=_=>m.value=_),density:"compact","hide-details":"",label:"記住本裝置"},null,8,["modelValue"])])]),_:1})]),_:1})])):(f(),g("div",J,[s.value?N("",!0):(f(),S(I,{key:0,class:"py-10",style:{"max-width":"520px"}},{default:l(()=>[o("div",L,[t(j,{indeterminate:""}),e[4]||(e[4]=o("div",{class:"text-body-2 text-medium-emphasis ms-3"},"載入中…",-1))])]),_:1}))])),t(G,{modelValue:x.value.show,"onUpdate:modelValue":e[3]||(e[3]=_=>x.value.show=_),timeout:1600},{default:l(()=>[y(P(x.value.text),1)]),_:1},8,["modelValue"])])}}}),ae=D(Z,[["__scopeId","data-v-cd0e2900"]]),ee=Symbol.for("nuxt:client-only"),le=T({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(w,{slots:n,attrs:k}){const v=r(!1);return K(()=>{v.value=!0}),F(ee,!0),s=>{var m;if(v.value)return(m=n.default)==null?void 0:m.call(n);const i=n.fallback||n.placeholder;if(i)return i();const c=s.fallback||s.placeholder||"",p=s.fallbackTag||s.placeholderTag||"span";return g(p,k,c)}}});export{le as _,ae as a};
