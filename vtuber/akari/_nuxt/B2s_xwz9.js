import{_ as Z,r as t,j,o as K,J as U,K as $,i as S,t as c,v,z as I,A as b,B as H,x as m,y as g,L as J,M as Q,N as C,O as q,P as W,Q as X,R as Y,S as ee}from"./Cu4JB47Y.js";const R=window.setInterval,A=[{time:2.08},{time:3.55},{time:4.96},{time:6.28},{time:6.76},{time:7.23},{time:7.69},{time:9.16},{time:10.5},{time:11.88},{time:12.32},{time:12.77},{time:13.29},{time:14.57},{time:16.03},{time:17.4},{time:18.74},{time:20.18},{time:21.6},{time:23.06},{time:24.35},{time:25.81},{time:27.15},{time:28.66},{time:29.99},{time:31.41},{time:32.77},{time:34.16},{time:35.51},{time:36.92},{time:37.97},{time:38.4},{time:38.89},{time:39.3},{time:39.79},{time:40.27},{time:40.72},{time:41.19},{time:41.87},{time:42.1},{time:42.6},{time:43.04},{time:43.51},{time:43.98},{time:44.4},{time:44.87},{time:45.37},{time:45.8},{time:46.27},{time:46.8},{time:47.72},{time:47.94},{time:48.15},{time:48.38},{time:48.63},{time:48.86},{time:49.12},{time:49.38},{time:49.66},{time:50.43},{time:50.65},{time:50.95},{time:51.37},{time:51.6},{time:51.85},{time:52.12},{time:52.35},{time:52.83},{time:53.28},{time:53.8},{time:54.02},{time:54.25},{time:54.47},{time:54.69},{time:54.89},{time:55.16},{time:55.63},{time:56.1},{time:56.56},{time:57.01},{time:57.48},{time:57.95},{time:58.43},{time:58.84},{time:59.05},{time:59.33},{time:59.76},{time:59.98},{time:60.21},{time:60.45},{time:60.76},{time:61.23},{time:61.67},{time:61.89},{time:62.13},{time:62.56},{time:62.77},{time:63.01},{time:63.27},{time:63.49},{time:63.96},{time:64.42},{time:64.89},{time:65.13},{time:65.36},{time:65.6},{time:65.86},{time:66.08},{time:66.33},{time:66.82},{time:67.26},{time:67.75},{time:68.2},{time:68.66},{time:69.11},{time:69.59},{time:70.02},{time:70.47},{time:70.94},{time:71.41},{time:71.89},{time:72.31},{time:72.75},{time:73.26},{time:73.73},{time:74.21},{time:74.68},{time:75.16},{time:75.61},{time:76.06},{time:76.53},{time:77},{time:77.43},{time:77.89},{time:78.35},{time:78.85},{time:79.25},{time:79.74},{time:80.2},{time:80.73},{time:81.19},{time:81.65},{time:82.11},{time:82.61},{time:83.11},{time:83.54},{time:83.76},{time:84.27},{time:84.5},{time:85.32},{time:85.56},{time:85.84},{time:86.28},{time:86.54},{time:87.02},{time:87.25},{time:88.17},{time:88.62},{time:89.55},{time:89.99},{time:90.46},{time:90.9},{time:91.41},{time:91.64},{time:91.87},{time:92.35},{time:92.81},{time:93.27},{time:93.76},{time:94.24},{time:94.66},{time:95.13},{time:95.59},{time:96.07},{time:96.46},{time:96.96},{time:97.66},{time:97.9},{time:98.44},{time:99.06},{time:99.42},{time:99.84},{time:100.28},{time:100.72},{time:101.19},{time:101.64},{time:102.1},{time:102.6},{time:103.13},{time:103.57},{time:103.78},{time:104.04},{time:104.28},{time:104.53},{time:104.76},{time:104.98},{time:105.2},{time:105.47},{time:105.9},{time:106.36},{time:106.61},{time:106.84},{time:107.3},{time:107.5},{time:107.72},{time:107.96},{time:108.2},{time:108.65},{time:109.14},{time:109.63},{time:109.86},{time:110.07},{time:110.29},{time:110.5},{time:110.73},{time:111.01},{time:111.49},{time:111.95},{time:112.39},{time:112.87},{time:113.27},{time:113.79},{time:114.21},{time:114.66},{time:114.88},{time:115.15},{time:115.6},{time:115.83},{time:116.07},{time:116.33},{time:116.6},{time:117.05},{time:117.49},{time:117.73},{time:117.96},{time:118.41},{time:118.63},{time:118.85},{time:119.09},{time:119.36},{time:119.81},{time:120.26},{time:120.73},{time:120.95},{time:121.19},{time:121.42},{time:121.64},{time:121.87},{time:122.16},{time:122.62},{time:123.13},{time:123.57},{time:124},{time:124.42},{time:124.88},{time:125.37},{time:125.86},{time:126.34},{time:126.79},{time:126.99},{time:127.21},{time:127.46},{time:127.7},{time:128.19},{time:128.64},{time:128.85},{time:129.12},{time:129.56},{time:129.8},{time:130.02},{time:130.25},{time:130.5},{time:130.95},{time:131.41},{time:131.85},{time:132.09},{time:132.34},{time:132.57},{time:132.8},{time:133.04},{time:133.29},{time:133.74},{time:134.17},{time:134.68},{time:135.19},{time:135.64},{time:136.09},{time:136.53},{time:137.01},{time:137.26},{time:137.49},{time:137.92},{time:138.16},{time:138.42},{time:138.64},{time:138.89},{time:139.36},{time:139.8},{time:140.03},{time:140.25},{time:140.72},{time:140.95},{time:141.18},{time:141.42},{time:141.64},{time:142.12},{time:142.54},{time:143.04},{time:143.3},{time:143.51},{time:143.77},{time:144},{time:144.23},{time:144.47},{time:144.91},{time:145.37},{time:145.86},{time:146.33},{time:146.84},{time:147.29},{time:147.7},{time:148.16},{time:148.38},{time:148.63},{time:149.07},{time:149.27},{time:149.53},{time:149.82},{time:150.03},{time:150.51},{time:150.97},{time:151.18},{time:151.44},{time:151.91},{time:152.11},{time:152.33},{time:152.57},{time:152.83},{time:153.28},{time:153.75},{time:154.23},{time:154.5},{time:154.72},{time:154.93},{time:155.16},{time:155.38},{time:155.61},{time:156.09},{time:156.56},{time:157},{time:157.5},{time:157.93},{time:158.36},{time:158.83},{time:159.28},{time:159.52},{time:159.76},{time:160.2},{time:160.44},{time:160.74},{time:160.96},{time:161.21},{time:161.66},{time:162.11},{time:162.37},{time:162.61},{time:163.07},{time:163.28},{time:163.51},{time:163.75},{time:164.02},{time:164.45},{time:164.9},{time:165.38},{time:165.62},{time:165.84},{time:166.07},{time:166.3},{time:166.55},{time:166.81},{time:167.25},{time:167.7},{time:168.2},{time:168.67},{time:169.12},{time:169.56},{time:170.02},{time:170.47},{time:170.98},{time:171.44},{time:171.65},{time:171.86},{time:172.11},{time:172.38},{time:172.81},{time:173.25},{time:173.48},{time:173.75},{time:174.22},{time:174.44},{time:174.68},{time:174.9},{time:175.15},{time:175.59},{time:176.08},{time:176.55},{time:176.79},{time:177.01},{time:177.23},{time:177.47},{time:177.68},{time:177.94},{time:178.39},{time:178.86},{time:179.33},{time:179.82},{time:180.28},{time:180.75},{time:181.19},{time:181.66},{time:182.14},{time:182.62},{time:183.09},{time:183.52},{time:183.97},{time:184.44},{time:184.93},{time:185.4},{time:185.89},{time:186.32},{time:186.75},{time:187.21},{time:187.71},{time:188.16},{time:188.63},{time:189.1},{time:189.57},{time:190.02},{time:190.48},{time:190.94},{time:191.38},{time:191.89},{time:192.4},{time:192.82},{time:193.3},{time:193.81},{time:194.25},{time:194.67},{time:195.12},{time:195.56},{time:196.08},{time:196.52},{time:196.97},{time:197.44},{time:197.95},{time:198.44},{time:198.89},{time:199.35},{time:199.8},{time:200.23},{time:200.7},{time:201.1},{time:201.62},{time:202.12},{time:202.59},{time:203.07}],te=["onKeydown"],ie={class:"controls"},me={class:"volume-control"},ne={class:"track"},ae=["src"],oe={key:0,class:"judgement akari-judgement"},se={class:"score"},le={key:0,class:"countdown"},ue="https://raw.githubusercontent.com/tony2265/web_image/main/vtuber/akari/game/wait.png",B="https://raw.githubusercontent.com/tony2265/web_image/main/vtuber/akari/game/bonk.png",re="https://raw.githubusercontent.com/tony2265/web_image/main/vtuber/akari/game/ball.png",ce=-.6,ve=200,de=80,k=5,_e={__name:"RhythmGame",setup(pe){const w=t(!1),E=t(B),d=t(0),n=t([]),a=t(""),_=t(.3),p=t(!1),s=t(0),x=t(null);let G=0,f=null,T=null;const l=t(0),O=t(0),L=j(()=>l.value/k/60+ce);let y=0,o=new Audio("https://raw.githubusercontent.com/tony2265/web_image/main/vtuber/akari/game/song1.mp3");o.volume=_.value;function h(){l.value=window.innerHeight-de,O.value=l.value-ve}function V(){o.volume=_.value}function z(){!p.value&&s.value===0?(s.value=3,T=R(()=>{s.value--,s.value<=0&&(clearInterval(T),D())},1e3)):F()}function D(){p.value=!0,o.play(),f=R(P,16)}function F(){p.value=!1,clearInterval(f),o.pause()}function P(){const i=o.currentTime;for(;y<A.length&&A[y].time-L.value<=i;)n.value.push({id:G++,y:-k*2}),y++;n.value.forEach(u=>u.y+=k);const e=n.value.findIndex(u=>u.y>l.value+80);e!==-1&&(d.value-=0,n.value.splice(e,1),a.value="Miss!",setTimeout(()=>{a.value=""},800))}function N(){E.value=`${B}?t=${Date.now()}`,w.value=!0,setTimeout(()=>{w.value=!1},300);const i=n.value.findIndex(e=>e.y>=O.value&&e.y<=l.value);i!==-1?(d.value+=10,n.value.splice(i,1),a.value="Great!"):(d.value-=0,a.value="Miss!"),setTimeout(()=>{a.value=""},800)}return K(()=>{h(),window.addEventListener("resize",h),U(()=>{var i;(i=x.value)==null||i.focus()})}),$(()=>{clearInterval(f),clearInterval(T),o.pause(),o.currentTime=0,window.removeEventListener("resize",h)}),(i,e)=>{const u=S("v-icon"),M=S("v-btn");return c(),v("div",{class:"game-container",tabindex:"0",onKeydown:Y(ee(N,["prevent"]),["space"]),ref_key:"gameRoot",ref:x},[I(M,{icon:"",class:"close-btn",onClick:e[0]||(e[0]=r=>i.$emit("close"))},{default:b(()=>[I(u,null,{default:b(()=>e[2]||(e[2]=[H("mdi-close")])),_:1})]),_:1}),m("div",ie,[I(M,{color:"brown",onClick:z,width:"100px"},{default:b(()=>[H(g(p.value?"PAUSE":"START"),1)]),_:1}),m("div",me,[e[3]||(e[3]=m("span",null,"MUSIC",-1)),J(m("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":e[1]||(e[1]=r=>_.value=r),onInput:V},null,544),[[Q,_.value]])])]),m("div",ne,[m("div",{class:"akari",onPointerdown:N},[m("img",{src:w.value?E.value:ue,style:{width:"300px"}},null,8,ae),a.value?(c(),v("div",oe,g(a.value),1)):C("",!0)],32),(c(!0),v(q,null,W(n.value,r=>(c(),v("img",{key:r.id,class:"note",src:re,style:X({top:r.y+"px"})},null,4))),128)),e[4]||(e[4]=m("div",{class:"hit-zone"},null,-1))]),m("div",se,"SCOREï¼š"+g(d.value),1),s.value>0?(c(),v("div",le,g(s.value),1)):C("",!0)],40,te)}}},we=Z(_e,[["__scopeId","data-v-d0c2ed73"]]);export{we as default};
